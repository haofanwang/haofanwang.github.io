<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Haofan Wang's Blog">
    <meta name="author" content="Haofan Wang">

    <!-- favicon -->
    <link href="favicon.png" rel=icon>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-104092499-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

    <!-- bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- font-awesome -->
    <link href="css/fontawesome.min.css" rel="stylesheet">
    <link href="css/solid.min.css" rel="stylesheet">
    <link href="css/brands.min.css" rel="stylesheet">

    <!-- academicons -->
    <link href="css/academicons.min.css" rel="stylesheet">

    <!-- Style CSS -->
    <link href="css/style.css" rel="stylesheet">

    <!-- marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
      .post-wrapper {
        padding: 100px 0 50px 0;
      }
      
      .post-container {
        max-width: 900px;
        margin: 0 auto;
      }
      
      .post-header {
        margin-bottom: 40px;
        padding-bottom: 30px;
        border-bottom: 2px solid #e9ecef;
      }
      
      .post-title {
        font-size: 2.5em;
        font-weight: bold;
        margin-bottom: 20px;
        line-height: 1.3;
      }
      
      .post-meta {
        color: #666;
        font-size: 1em;
      }
      
      .post-content {
        font-size: 1.1em;
        line-height: 1.8;
        color: #333;
      }
      
      .post-content h1,
      .post-content h2,
      .post-content h3,
      .post-content h4 {
        margin-top: 40px;
        margin-bottom: 20px;
        font-weight: bold;
      }
      
      .post-content h1 {
        font-size: 2.2em;
        padding-bottom: 10px;
        border-bottom: 2px solid #e9ecef;
      }
      
      .post-content h2 {
        font-size: 1.8em;
      }
      
      .post-content h3 {
        font-size: 1.5em;
      }
      
      .post-content p {
        margin-bottom: 20px;
      }
      
      .post-content ul,
      .post-content ol {
        margin-bottom: 20px;
        padding-left: 30px;
      }
      
      .post-content li {
        margin-bottom: 10px;
      }
      
      .post-content code {
        background-color: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;
      }
      
      .post-content pre {
        background-color: #f4f4f4;
        padding: 20px;
        border-radius: 5px;
        overflow-x: auto;
        margin-bottom: 20px;
      }
      
      .post-content pre code {
        background-color: transparent;
        padding: 0;
      }
      
      .post-content blockquote {
        border-left: 4px solid #007bff;
        padding-left: 20px;
        margin: 20px 0;
        color: #666;
        font-style: italic;
      }
      
      .post-content img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 30px auto;
        border-radius: 5px;
      }
      
      .post-content a {
        color: #007bff;
        text-decoration: none;
      }
      
      .post-content a:hover {
        text-decoration: underline;
      }
      
      .back-to-blog {
        margin-bottom: 30px;
      }
      
      .back-to-blog a {
        color: #007bff;
        text-decoration: none;
        font-size: 1.1em;
      }
      
      .back-to-blog a:hover {
        text-decoration: underline;
      }
      
      .loading {
        text-align: center;
        padding: 100px 0;
        font-size: 1.2em;
        color: #666;
      }
    </style>

    <title>Blog Post - Haofan Wang</title>
  </head>
  <body>
    <div class="container-fluid">
      <nav class="navbar navbar-expand-sm navbar-dark fixed-top">
        <!-- Navbar content -->
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html"><serif>Haofan Wang</serif></a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarToggler">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-item nav-link" href="index.html#home">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-item nav-link" href="index.html#bio">Biography</a>
              </li>
              <li class="nav-item">
                <a class="nav-item nav-link" href="index.html#pub">Publications</a>
              </li>
              <li class="nav-item">
                <a class="nav-item nav-link active" href="blog.html">Blog</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  More
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-menu-xl-left" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="index.html#Teaching">Teaching</a>
                  <a class="dropdown-item" href="index.html#Services">Services</a>
                  <a class="dropdown-item" href="index.html#career">Career</a>
                  <a class="dropdown-item" href="index.html#misc">Misc</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="post-wrapper">
        <div class="post-container">
          <div class="back-to-blog">
            <a href="blog.html">‚Üê Back to Blog</a>
          </div>
          
          <div id="post-loading" class="loading">
            Loading post...
          </div>
          
          <div id="post-error" class="loading" style="display: none; color: #dc3545;">
            Post not found.
          </div>
          
          <article id="post-article" style="display: none;">
            <div class="post-header" id="post-header">
              <!-- Post header will be inserted here -->
            </div>
            <div class="post-content" id="post-content">
              <!-- Post content will be inserted here -->
            </div>
          </article>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <script>
      // Get post slug from URL
      const urlParams = new URLSearchParams(window.location.search);
      const postSlug = urlParams.get('post');

      if (!postSlug) {
        document.getElementById('post-loading').style.display = 'none';
        document.getElementById('post-error').style.display = 'block';
        document.getElementById('post-error').textContent = 'No post specified.';
      } else {
        // Fetch and render the markdown file
        fetch(`blog/posts/${postSlug}.md`)
          .then(response => {
            if (!response.ok) {
              throw new Error('Post not found');
            }
            return response.text();
          })
          .then(markdown => {
            // Parse markdown
            const html = marked.parse(markdown);
            
            // Extract title, date, and author from the markdown
            const lines = markdown.split('\n');
            let title = '';
            let date = '';
            let author = '';
            
            for (let i = 0; i < Math.min(10, lines.length); i++) {
              const line = lines[i];
              if (line.startsWith('# ')) {
                title = line.substring(2).trim();
              } else if (line.includes('**Date:**')) {
                date = line.replace('**Date:**', '').trim();
              } else if (line.includes('**Author:**')) {
                author = line.replace('**Author:**', '').trim();
              }
            }
            
            // Update page title
            if (title) {
              document.title = `${title} - Haofan Wang`;
            }
            
            // Render post header
            const postHeader = document.getElementById('post-header');
            postHeader.innerHTML = `
              <h1 class="post-title">${title}</h1>
              <div class="post-meta">
                ${date ? `<i class="far fa-calendar"></i> ${date}` : ''}
                ${date && author ? ' | ' : ''}
                ${author ? `<i class="far fa-user"></i> ${author}` : ''}
              </div>
            `;
            
            // Render post content (remove the first title and metadata from content)
            const contentLines = lines.slice(
              lines.findIndex(line => line.startsWith('## '))
            );
            const contentMarkdown = contentLines.join('\n');
            const contentHtml = marked.parse(contentMarkdown);
            
            document.getElementById('post-content').innerHTML = contentHtml;
            
            // Show article, hide loading
            document.getElementById('post-loading').style.display = 'none';
            document.getElementById('post-article').style.display = 'block';
          })
          .catch(error => {
            console.error('Error loading post:', error);
            document.getElementById('post-loading').style.display = 'none';
            document.getElementById('post-error').style.display = 'block';
          });
      }
    </script>

    <!-- jQuery, Popper, Bootstrap JS -->
    <script src="js/jquery-3.3.1.slim.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>

